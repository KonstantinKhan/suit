openapi: 3.0.3
info:
  version: 0.0.1
  title: Product
  description: 'Description of the transport model of the product'
  license:
    name: MIT
servers:
  - url: "http://localhost"

paths:
  /create:
    post:
      tags:
        - product
      summary: Create a new product
      operationId: createProduct
      requestBody:
        description: The request object to create a new product
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProductRequest'
        required: true
      responses:
        200:
          description: Not defined
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateProductResponse'
components:
  schemas:

    CreatableProduct:
      type: object
      description: The structure with data about the product to create request
      properties:
        productName:
          type: string
          description: Product name
          example:
            Филе куриной грудки
        measure:
          type: object
          description: The structure with data about the measure
          properties:
            measureValue:
              type: number
              description: Measure value
              example: 100
            unit:
              type: object
              description: The structure with data about the unit
              properties:
                unitId:
                  type: string
                  example: 046a68e8-2085-4339-8dce-725c5609757a
                unitValue:
                  type: string
                  description: Unit of measurement
                  example: гр.
        energyValue:
          type: object
          description: The structure with data about energyValue
          properties:
            calories:
              type: number
              description: product calories
              example:
                110.0
            proteins:
              type: number
              description: product proteins
              example:
                21.0
            fats:
              type: number
              description: product fats
              example:
                3.0
            carbohydrates:
              type: number
              description: product carbohydrates
              example:
                0.0

    UpdatableProduct:
      description: Not defined
      allOf:
        - $ref: '#/components/schemas/CreatableProduct'
        - type: object
          properties:
            productId:
              type: string
              example: ab416fb1-be41-456e-ad40-68ca605a44e7

    ResponseProduct:
      description: Not defined
      allOf:
        - $ref: '#/components/schemas/UpdatableProduct'

    CreateProductRequest:
      allOf:
        - $ref: './spec-suit-api.yaml#/components/schemas/BaseMessage'
        - $ref: './spec-suit-api.yaml#/components/schemas/BaseRequest'
        - type: object
          properties:
            createProduct:
              $ref: '#/components/schemas/CreatableProduct'


    CreateProductResponse:
      allOf:
        - $ref: './spec-suit-api.yaml#/components/schemas/BaseMessage'
        - $ref: './spec-suit-api.yaml#/components/schemas/BaseResponse'
        - type: object
          properties:
            createdProduct:
              $ref: '#/components/schemas/ResponseProduct'
